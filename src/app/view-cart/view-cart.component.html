<div class="wrapper" *ngIf="cart$ | async as c">
  <div
  *ngIf="c.size > 0"
  class="cart-shipping">
    <p><i-feather name="thumbs-up"></i-feather>Awesome! Your order qualifies for Free Standard Shipping</p>
  </div>
  <div
  *ngIf="c.size > 0"
  class="cart-header">
    <h1 class="cart-header-title">Your Cart</h1>
    <a class="cart-header-link" routerLink="/products">Continue Shopping</a>
  </div>
  <!-- <table
*ngIf="c.size > 0; else emptyCart"
class="min-w-full bg-white border border-gray-300">
  <thead>
    <tr>
      <th class="px-6 py-3 border-b">Product</th>
      <th class="px-6 py-3 border-b">Quantity</th>
      <th class="px-6 py-3 border-b">Price</th>
    </tr>
  </thead>
  <tbody>
    <tr
     *ngFor="let product of c.products"
     >
      <td class="px-6 py-4 whitespace-nowrap border-b">{{ product.name | titlecase }}<img [src]="product.image"></td>
      <div class="flex items-center">
        <button class="px-2 py-1 bg-blue-500 text-white rounded" (click)="decrementQuantity(product)">-</button>
        <span class="px-2">{{ product.quantity }}</span>
        <button class="px-2 py-1 bg-blue-500 text-white rounded" (click)="incrementQuantity(product)">+</button>
      </div>
      <td class="px-6 py-4 whitespace-nowrap border-b">{{ product.price * product.quantity | currency}}</td>
      <td class="px-6 py-4 whitespace-nowrap border-b">
        <button href="#" (click)="removeFromCart(c.products,product)">Remove</button>
      </td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
      <td class="px-6 py-4 whitespace-nowrap" colspan="2">Total</td>
      <td class="px-6 py-4 whitespace-nowrap border-b">
        {{ getTotalAmount(c.products) | currency:'USD' }}
      </td>
    </tr>
  </tfoot>

  <div class="flex justify-center mt-8">
    <button class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600" (click)="checkout(c)">Checkout</button>
  </div>
</table>
</div> -->
  <div class="cart-container" *ngIf="c.size > 0; else emptyCart">
    <div class="spacer"></div>
    <div class="product-header">
      <h3 class="product-header-text">product</h3>
      <h3 class="product-header-text">total</h3>
    </div>
    <div *ngFor="let product of c.products" class="cart-flex">
      <div class="img-container">
      <img class="p-image" [src]="product.image">
    </div>
      <div
      class="p.details"
      [ngStyle]="{
        'display' : 'flex',
        'flex-direction' : 'column',
        'gap' : '16px',
        'justify-content' : 'center',
        'align-items': 'center',
        'width': '50ch',
        'word-wrap': 'break-word',
        'hyphens': 'auto'
      }"
      >
        <h1>{{product.name | titlecase}}</h1>
        <h1>{{product.price | currency}}</h1>
      </div>
      <div class="p.quantity" [ngStyle]="{display: 'flex', gap: '24px'}">
        <div
         [ngStyle]="{
          'display': 'flex',
          'justify-content': 'space-evenly',
          'align-items': 'center',
          'width': '150px',
          'height': '50px',
          'border': '1px solid black'
        }"
         >
          <button class="p-2 bg-white text-black rounded-full text-3xl button-1"
            (click)="decrementQuantity(product.quantity)"></button>
          <span>{{ 1 }}</span>
          <button class="p-2 bg-white text-black rounded-full text-3xl button-2"
            (click)="incrementQuantity(product.quantity)"></button>
        </div>
        <button (click)="removeFromCart(c.products,product)"><i-feather name="trash"></i-feather></button>
      </div>
      <div class="p.total">
        {{ product.price * product.quantity | currency}}
      </div>
    </div>
  </div>

  <div
  *ngIf="c.size > 0"
  class="flex-total">
    <h1 class="total-title">Subtotal</h1>
    <p class="total">
      {{ getTotalAmount(c.products) | currency:'USD' }}
    </p>
    <button class="shop-button" (click)="checkout(c)">Checkout</button>
  </div>

  <ng-template
   #emptyCart
   >
    <main class="empty-wrapper">
      <h1 class="empty-heading">Your cart is empty</h1>
      <button class="shop-button" routerLink="/products">Continue Shopping</button>
    </main>
  </ng-template>
